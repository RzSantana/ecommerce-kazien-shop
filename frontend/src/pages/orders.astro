---
import ClientLayout from "@layouts/ClientLayout.astro";
import { getSession } from "auth-astro/server";
import Button from "@components/ui/Button";

export const prerender = false;

// Obtener la sesión del usuario
const session = await getSession(Astro.request);

// Si no hay sesión, redirigir al login
if (!session?.user) {
    return Astro.redirect("/auth/login");
}
---

<ClientLayout>
    <div class="pt-32 px-4 max-w-6xl mx-auto">
        <!-- Navegación -->
        <div class="mb-8 w-fit">
            <Button text="← Back to Profile" type="link" href="/profile" />
        </div>

        <!-- Contenido de órdenes -->
        <div class="bg-white rounded-lg shadow-md p-8">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-gray-900 mb-2">
                    Order History
                </h1>
                <p class="text-gray-600">
                    Track your purchases and order status
                </p>
            </div>

            <!-- Estado vacío -->
            <div class="text-center py-16">
                <div class="bg-gray-100 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center">
                    <svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
                    </svg>
                </div>
                <h3 class="text-xl font-semibold text-gray-900 mb-2">
                    No orders yet
                </h3>
                <p class="text-gray-600 mb-6">
                    You haven't made any purchases yet. Start shopping to see your orders here.
                </p>
                <Button
                    text="Start Shopping"
                    type="primary"
                    href="/shop"
                />
            </div>
        </div>
    </div>
</ClientLayout>
